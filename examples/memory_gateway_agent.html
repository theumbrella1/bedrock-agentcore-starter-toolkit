
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
      <meta name="description" content="Documentation for Amazon Bedrock AgentCore, primitives for building and running AI agents">
    
    
    
      <link rel="canonical" href="https://theumbrella1.github.io/bedrock-agentcore-starter-toolkit/examples/memory_gateway_agent.html">
    
    
      <link rel="prev" href="gateway-integration.html">
    
    
      <link rel="next" href="runtime-framework-agents.html">
    
    
    <link rel="icon" href=".." sizes="any">
    <link rel="icon" href="../assets/images/favicon.png" type="image/svg+xml">
    <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">

    
      
        <title>Memory Gateway Agent - Amazon Bedrock AgentCore</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#amazon-bedrock-agentcore-quickstart" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Amazon Bedrock AgentCore" class="md-header__button md-logo" aria-label="Amazon Bedrock AgentCore" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Amazon Bedrock AgentCore
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Memory Gateway Agent
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/theumbrella1/bedrock-agentcore-starter-toolkit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index.html" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="index.html" class="md-tabs__link">
          
  
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://github.com/aws/bedrock-agentcore-sdk-python/blob/main/CONTRIBUTING.md" class="md-tabs__link">
        
  
  
    
  
  Contribute ❤️

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api-reference/runtime.html" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Amazon Bedrock AgentCore" class="md-nav__button md-logo" aria-label="Amazon Bedrock AgentCore" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Amazon Bedrock AgentCore
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/theumbrella1/bedrock-agentcore-starter-toolkit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Runtime
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Runtime
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/runtime/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/runtime/overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/runtime/permissions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime Permissions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/runtime/async.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime Async Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/runtime/notebook.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime Notebook
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gateway
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Gateway
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/gateway/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gateway Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Memory
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Memory
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/memory/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Identity
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            Identity
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/identity/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Identity Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Built-in Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            Built-in Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/builtin-tools/quickstart-browser.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart Browser Tool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/builtin-tools/quickstart-code-interpreter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart Code Interpreter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Observability
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            Observability
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/observability/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Observability Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Import Agent
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_8">
            <span class="md-nav__icon md-icon"></span>
            Import Agent
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/import-agent/quickstart.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Import Agent Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/import-agent/overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Import Agent Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/import-agent/configuration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Import Agent Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="agentcore-quickstart-example.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime Transform and Deploy Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="session-management.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Session Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="async-processing.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Async Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="gateway-integration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gateway Integration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Memory Gateway Agent
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="memory_gateway_agent.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Memory Gateway Agent
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-define-our-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Define Our Agent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-add-short-term-and-long-term-memory" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Add Short-term and Long-term Memory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-add-gateway-with-a-calculator-tool" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Add Gateway with a Calculator Tool
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-update-our-agent-to-use-the-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Update Our Agent to Use the Gateway
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-to-agentcore-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying to AgentCore Runtime
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-your-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Your Agent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Your Agent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-short-term-memory" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Short-Term Memory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-gateway-calculator" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Gateway Calculator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-long-term-memory" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Long-Term Memory
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-happening-behind-the-scenes" class="md-nav__link">
    <span class="md-ellipsis">
      What's Happening Behind the Scenes?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="runtime-framework-agents.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime Framework Agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="semantic_search.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Semantic Search
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/aws/bedrock-agentcore-sdk-python/blob/main/CONTRIBUTING.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contribute ❤️
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bedrock AgentCore SDK
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Bedrock AgentCore SDK
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/runtime.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Runtime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/identity.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Identity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/memory.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/tools.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Built-in Tools
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bedrock AgentCore Starter Toolkit
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Bedrock AgentCore Starter Toolkit
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-reference/cli.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AgentCore CLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-define-our-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Define Our Agent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-add-short-term-and-long-term-memory" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Add Short-term and Long-term Memory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-add-gateway-with-a-calculator-tool" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Add Gateway with a Calculator Tool
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lets-update-our-agent-to-use-the-gateway" class="md-nav__link">
    <span class="md-ellipsis">
      Let's Update Our Agent to Use the Gateway
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-to-agentcore-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying to AgentCore Runtime
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-your-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Your Agent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Your Agent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#testing-short-term-memory" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Short-Term Memory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-gateway-calculator" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Gateway Calculator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-long-term-memory" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Long-Term Memory
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-happening-behind-the-scenes" class="md-nav__link">
    <span class="md-ellipsis">
      What's Happening Behind the Scenes?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="amazon-bedrock-agentcore-quickstart">Amazon Bedrock AgentCore Quickstart<a class="headerlink" href="#amazon-bedrock-agentcore-quickstart" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Amazon Bedrock AgentCore is a suite of services designed to accelerate AI agent development, deployment, and management. Unlike traditional ML platforms, AgentCore offers specialized infrastructure for agentic workflows with memory persistence, tool connectivity, and secure runtime environments.</p>
<p>This quickstart guide will show you how to build and deploy a fully-functional AI agent with:</p>
<ul>
<li><strong>Short-term and long-term memory</strong> to recall conversations within and across sessions</li>
<li><strong>Gateway integration</strong> for tool access (with a calculator example)</li>
<li><strong>Secure runtime deployment</strong> for production-ready hosting</li>
</ul>
<p>By the end, you'll have an agent that remembers user preferences, accesses tools, and runs in a secure, scalable environment—all without managing complex infrastructure.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>Before starting, ensure you have:</p>
<ul>
<li>An AWS account with appropriate permissions</li>
<li>AWS CLI configured with credentials (<code>aws configure</code>)</li>
<li>Access to Amazon Bedrock models (Claude 3.7 Sonnet)</li>
<li>Python 3.10 or newer</li>
</ul>
<h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h3>
<p>Set up your environment:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create and activate virtual environment</span>
python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate<span class="w">  </span><span class="c1"># On Windows: .venv\Scripts\activate</span>

<span class="c1"># Install required packages</span>
pip<span class="w"> </span>install<span class="w"> </span>bedrock-agentcore<span class="w"> </span>strands-agents<span class="w"> </span>bedrock-agentcore-starter-toolkit
</code></pre></div>
<h2 id="lets-define-our-agent">Let's Define Our Agent<a class="headerlink" href="#lets-define-our-agent" title="Permanent link">&para;</a></h2>
<p>First, we'll create an AI agent with memory capabilities using the Strands framework. This agent will form the foundation for our memory and gateway integrations.</p>
<p>Create a file named <code>agent.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This is your AI agent with memory capabilities.</span>
<span class="sd">It uses Strands framework and can optionally connect to AgentCore Memory.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bedrock_agentcore.runtime</span><span class="w"> </span><span class="kn">import</span> <span class="n">BedrockAgentCoreApp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bedrock_agentcore.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryClient</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">strands</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">strands.hooks</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentInitializedEvent</span><span class="p">,</span> <span class="n">HookProvider</span><span class="p">,</span> <span class="n">HookRegistry</span><span class="p">,</span> <span class="n">MessageAddedEvent</span>

<span class="c1"># Initialize the AgentCore runtime app</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">BedrockAgentCoreApp</span><span class="p">()</span>

<span class="c1"># Connect to memory service (if MEMORY_ID is set)</span>
<span class="n">memory_client</span> <span class="o">=</span> <span class="n">MemoryClient</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-2&#39;</span><span class="p">)</span>
<span class="n">MEMORY_ID</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;MEMORY_ID&#39;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MemoryHook</span><span class="p">(</span><span class="n">HookProvider</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This hook automatically handles memory operations:</span>
<span class="sd">    - Loads previous conversation when agent starts</span>
<span class="sd">    - Saves each message after it&#39;s processed</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_agent_initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs when agent starts - loads conversation history&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">MEMORY_ID</span><span class="p">:</span> <span class="k">return</span>

        <span class="c1"># Get last 3 conversation turns from memory</span>
        <span class="n">turns</span> <span class="o">=</span> <span class="n">memory_client</span><span class="o">.</span><span class="n">get_last_k_turns</span><span class="p">(</span>
            <span class="n">memory_id</span><span class="o">=</span><span class="n">MEMORY_ID</span><span class="p">,</span>
            <span class="n">actor_id</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
            <span class="n">session_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">),</span>
            <span class="n">k</span><span class="o">=</span><span class="mi">3</span>  <span class="c1"># Number of previous exchanges to remember</span>
        <span class="p">)</span>

        <span class="c1"># Add conversation history to agent&#39;s context</span>
        <span class="k">if</span> <span class="n">turns</span><span class="p">:</span>
            <span class="n">context</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">m</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">m</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">][</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                               <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">turns</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">t</span><span class="p">])</span>
            <span class="n">event</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">system_prompt</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Previous:</span><span class="se">\n</span><span class="si">{</span><span class="n">context</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_message_added</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Runs after each message - saves it to memory&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">MEMORY_ID</span><span class="p">:</span> <span class="k">return</span>

        <span class="c1"># Save the latest message to memory</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">memory_client</span><span class="o">.</span><span class="n">create_event</span><span class="p">(</span>
            <span class="n">memory_id</span><span class="o">=</span><span class="n">MEMORY_ID</span><span class="p">,</span>
            <span class="n">actor_id</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
            <span class="n">session_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">),</span>
            <span class="n">messages</span><span class="o">=</span><span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]),</span> <span class="n">msg</span><span class="p">[</span><span class="s2">&quot;role&quot;</span><span class="p">])]</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">registry</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Registers both hooks with the agent&quot;&quot;&quot;</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">add_callback</span><span class="p">(</span><span class="n">AgentInitializedEvent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_agent_initialized</span><span class="p">)</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">add_callback</span><span class="p">(</span><span class="n">MessageAddedEvent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_message_added</span><span class="p">)</span>

<span class="c1"># Create the Strands agent</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;us.anthropic.claude-3-7-sonnet-20250219-v1:0&quot;</span><span class="p">,</span>  <span class="c1"># Bedrock Claude model</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;You&#39;re a helpful assistant with memory.&quot;</span><span class="p">,</span>
    <span class="n">hooks</span><span class="o">=</span><span class="p">[</span><span class="n">MemoryHook</span><span class="p">()]</span> <span class="k">if</span> <span class="n">MEMORY_ID</span> <span class="k">else</span> <span class="p">[],</span>  <span class="c1"># Add memory hook if configured</span>
    <span class="n">state</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;session_id&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">entrypoint</span>
<span class="k">def</span><span class="w"> </span><span class="nf">invoke</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main entry point - this function runs for each user message.</span>
<span class="sd">    - payload: Contains the user&#39;s prompt</span>
<span class="sd">    - context: Contains runtime info like session_id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Use the session ID from runtime (for session isolation)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="s1">&#39;session_id&#39;</span><span class="p">):</span>
        <span class="n">agent</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">session_id</span><span class="p">)</span>

    <span class="c1"># Process the user&#39;s message and return response</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">agent</span><span class="p">(</span><span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;prompt&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>  <span class="c1"># Start the agent locally for testing</span>
</code></pre></div>
<p>Let's also create a <code>requirements.txt</code> file for deployment:</p>
<div class="highlight"><pre><span></span><code>bedrock-agentcore
strands-agents
</code></pre></div>
<h2 id="lets-add-short-term-and-long-term-memory">Let's Add Short-term and Long-term Memory<a class="headerlink" href="#lets-add-short-term-and-long-term-memory" title="Permanent link">&para;</a></h2>
<p>Now, let's create memory resources for our agent. AgentCore Memory provides two types of memory:</p>
<ol>
<li><strong>Short-term memory (STM)</strong>: Stores raw conversation turns within a session</li>
<li><strong>Long-term memory (LTM)</strong>: Intelligently extracts and retains information across sessions</li>
</ol>
<p>Create a file named <code>setup_memory.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This script creates two types of memory resources:</span>
<span class="sd">1. STM (Short-Term Memory): Remembers within session only</span>
<span class="sd">2. LTM (Long-Term Memory): Extracts and remembers across sessions</span>

<span class="sd">Run this once to create your memory resources.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">bedrock_agentcore.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryClient</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>

<span class="c1"># Connect to AgentCore Memory service</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">MemoryClient</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-2&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating memory resources...</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># === SHORT-TERM MEMORY ===</span>
<span class="c1"># Only stores raw conversation, no intelligent extraction</span>
<span class="n">stm</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_memory_and_wait</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Demo_STM_</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="c1"># Unique name</span>
    <span class="n">strategies</span><span class="o">=</span><span class="p">[],</span>  <span class="c1"># Empty = no extraction strategies</span>
    <span class="n">event_expiry_days</span><span class="o">=</span><span class="mi">7</span>  <span class="c1"># Keep conversations for 7 days</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✅ STM Memory Created: </span><span class="si">{</span><span class="n">stm</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   What it does:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   - Stores exact conversation messages&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   - Remembers within the same session only&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   - Instant retrieval (no processing needed)&quot;</span><span class="p">)</span>

<span class="c1"># === LONG-TERM MEMORY ===</span>
<span class="c1"># Intelligently extracts preferences and facts</span>
<span class="n">ltm</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_memory_and_wait</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Demo_LTM_</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">strategies</span><span class="o">=</span><span class="p">[</span>
        <span class="c1"># Extracts user preferences like &quot;I prefer Python&quot;</span>
        <span class="p">{</span><span class="s2">&quot;userPreferenceMemoryStrategy&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;prefs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;namespaces&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/user/preferences&quot;</span><span class="p">]</span>
        <span class="p">}},</span>
        <span class="c1"># Extracts facts like &quot;My birthday is in January&quot;</span>
        <span class="p">{</span><span class="s2">&quot;semanticMemoryStrategy&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;facts&quot;</span><span class="p">,</span>
            <span class="s2">&quot;namespaces&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/user/facts&quot;</span><span class="p">]</span>
        <span class="p">}}</span>
    <span class="p">],</span>
    <span class="n">event_expiry_days</span><span class="o">=</span><span class="mi">30</span>  <span class="c1"># Keep for 30 days</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">✅ LTM Memory Created: </span><span class="si">{</span><span class="n">ltm</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   What it does:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   - Everything STM does PLUS:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   - Extracts preferences and facts automatically&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   - Remembers across different sessions&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   - Needs 5-10 seconds to process extractions&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Choose which memory to use:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  export MEMORY_ID=</span><span class="si">{</span><span class="n">stm</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">  # For STM demo&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  export MEMORY_ID=</span><span class="si">{</span><span class="n">ltm</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">  # For LTM demo&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span>
</code></pre></div>
<p>Run the memory setup script:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>setup_memory.py
</code></pre></div>
<p>You'll see output showing the IDs for both memory types. Note these IDs—you'll use them to set the <code>MEMORY_ID</code> environment variable when deploying your agent.</p>
<h2 id="lets-add-gateway-with-a-calculator-tool">Let's Add Gateway with a Calculator Tool<a class="headerlink" href="#lets-add-gateway-with-a-calculator-tool" title="Permanent link">&para;</a></h2>
<p>Now we'll add a gateway with a calculator tool. Gateway allows your agent to access tools securely.</p>
<p>Create <code>setup_gateway.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This script creates a gateway with a calculator tool.</span>
<span class="sd">The gateway provides a secure way for your agent to access tools.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">bedrock_agentcore_starter_toolkit.operations.gateway.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">GatewayClient</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>

<span class="c1"># Create a unique name for the gateway</span>
<span class="n">gateway_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Demo_Gateway_</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># Initialize client</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">GatewayClient</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s2">&quot;us-west-2&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="c1"># Create OAuth authorizer with Cognito</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating OAuth authorization server...&quot;</span><span class="p">)</span>
<span class="n">cognito_response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_oauth_authorizer_with_cognito</span><span class="p">(</span><span class="n">gateway_name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✅ Authorization server created</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Create Gateway</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating Gateway...&quot;</span><span class="p">)</span>
<span class="n">gateway</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_mcp_gateway</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">gateway_name</span><span class="p">,</span>
    <span class="n">role_arn</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># Auto-creates IAM role</span>
    <span class="n">authorizer_config</span><span class="o">=</span><span class="n">cognito_response</span><span class="p">[</span><span class="s2">&quot;authorizer_config&quot;</span><span class="p">],</span>
    <span class="n">enable_semantic_search</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✅ Gateway created: </span><span class="si">{</span><span class="n">gateway</span><span class="p">[</span><span class="s1">&#39;gatewayUrl&#39;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Fix IAM permissions</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fixing IAM permissions...&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">fix_iam_permissions</span><span class="p">(</span><span class="n">gateway</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;⏳ Waiting 30s for IAM propagation...&quot;</span><span class="p">)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✅ IAM permissions configured</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Add calculator Lambda target</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Adding calculator Lambda target...&quot;</span><span class="p">)</span>
<span class="n">calculator_schema</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;inlinePayload&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;calculate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Perform a mathematical calculation&quot;</span><span class="p">,</span>
            <span class="s2">&quot;inputSchema&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;subtract&quot;</span><span class="p">,</span> <span class="s2">&quot;multiply&quot;</span><span class="p">,</span> <span class="s2">&quot;divide&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The mathematical operation to perform&quot;</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;First operand&quot;</span><span class="p">},</span>
                    <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Second operand&quot;</span><span class="p">}</span>
                <span class="p">},</span>
                <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;operation&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="n">lambda_target</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_mcp_gateway_target</span><span class="p">(</span>
    <span class="n">gateway</span><span class="o">=</span><span class="n">gateway</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;CalculatorTool&quot;</span><span class="p">,</span>
    <span class="n">target_type</span><span class="o">=</span><span class="s2">&quot;lambda&quot;</span><span class="p">,</span>
    <span class="n">target_payload</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;toolSchema&quot;</span><span class="p">:</span> <span class="n">calculator_schema</span><span class="p">}</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✅ Calculator target added</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Get access token</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Getting access token...&quot;</span><span class="p">)</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_access_token_for_cognito</span><span class="p">(</span><span class="n">cognito_response</span><span class="p">[</span><span class="s2">&quot;client_info&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✅ Access token obtained</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Save configuration for agent</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;gateway_url&quot;</span><span class="p">:</span> <span class="n">gateway</span><span class="p">[</span><span class="s2">&quot;gatewayUrl&quot;</span><span class="p">],</span>
    <span class="s2">&quot;gateway_id&quot;</span><span class="p">:</span> <span class="n">gateway</span><span class="p">[</span><span class="s2">&quot;gatewayId&quot;</span><span class="p">],</span>
    <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">access_token</span>
<span class="p">}</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;gateway_config.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✅ Gateway setup complete!&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Gateway URL: </span><span class="si">{</span><span class="n">gateway</span><span class="p">[</span><span class="s1">&#39;gatewayUrl&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Gateway ID: </span><span class="si">{</span><span class="n">gateway</span><span class="p">[</span><span class="s1">&#39;gatewayId&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Configuration saved to: gateway_config.json&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
</code></pre></div>
<p>Run the gateway setup script:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>setup_gateway.py
</code></pre></div>
<p>The script creates a gateway with a calculator tool and saves the configuration to <code>gateway_config.json</code>.</p>
<h2 id="lets-update-our-agent-to-use-the-gateway">Let's Update Our Agent to Use the Gateway<a class="headerlink" href="#lets-update-our-agent-to-use-the-gateway" title="Permanent link">&para;</a></h2>
<p>Now, let's update our agent to use the gateway. Create <code>agent_with_gateway.py</code>:</p>
<div class="highlight"><pre><span></span><code><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Enhanced agent with both memory and gateway integration.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mcp</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClientSession</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mcp.client.streamable_http</span><span class="w"> </span><span class="kn">import</span> <span class="n">streamablehttp_client</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bedrock_agentcore.runtime</span><span class="w"> </span><span class="kn">import</span> <span class="n">BedrockAgentCoreApp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">bedrock_agentcore.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemoryClient</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">strands</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">strands.hooks</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentInitializedEvent</span><span class="p">,</span> <span class="n">HookProvider</span><span class="p">,</span> <span class="n">HookRegistry</span><span class="p">,</span> <span class="n">MessageAddedEvent</span>

<span class="c1"># Initialize the AgentCore runtime app</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">BedrockAgentCoreApp</span><span class="p">()</span>

<span class="c1"># Connect to memory service (if MEMORY_ID is set)</span>
<span class="n">memory_client</span> <span class="o">=</span> <span class="n">MemoryClient</span><span class="p">(</span><span class="n">region_name</span><span class="o">=</span><span class="s1">&#39;us-west-2&#39;</span><span class="p">)</span>
<span class="n">MEMORY_ID</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s1">&#39;MEMORY_ID&#39;</span><span class="p">)</span>

<span class="c1"># Load gateway configuration</span>
<span class="n">gateway_config</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;gateway_config.json&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">gateway_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loaded gateway config: </span><span class="si">{</span><span class="n">gateway_config</span><span class="p">[</span><span class="s1">&#39;gateway_url&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Gateway config not found. Only memory features will be available.&quot;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MemoryHook</span><span class="p">(</span><span class="n">HookProvider</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handles memory operations - same as before&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_agent_initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">MEMORY_ID</span><span class="p">:</span> <span class="k">return</span>

        <span class="n">turns</span> <span class="o">=</span> <span class="n">memory_client</span><span class="o">.</span><span class="n">get_last_k_turns</span><span class="p">(</span>
            <span class="n">memory_id</span><span class="o">=</span><span class="n">MEMORY_ID</span><span class="p">,</span>
            <span class="n">actor_id</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
            <span class="n">session_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">),</span>
            <span class="n">k</span><span class="o">=</span><span class="mi">3</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">turns</span><span class="p">:</span>
            <span class="n">context</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">m</span><span class="p">[</span><span class="s1">&#39;role&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">m</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">][</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                               <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">turns</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">t</span><span class="p">])</span>
            <span class="n">event</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">system_prompt</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Previous:</span><span class="se">\n</span><span class="si">{</span><span class="n">context</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_message_added</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">MEMORY_ID</span><span class="p">:</span> <span class="k">return</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">memory_client</span><span class="o">.</span><span class="n">create_event</span><span class="p">(</span>
            <span class="n">memory_id</span><span class="o">=</span><span class="n">MEMORY_ID</span><span class="p">,</span>
            <span class="n">actor_id</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
            <span class="n">session_id</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">agent</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">),</span>
            <span class="n">messages</span><span class="o">=</span><span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">msg</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]),</span> <span class="n">msg</span><span class="p">[</span><span class="s2">&quot;role&quot;</span><span class="p">])]</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">register_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">registry</span><span class="p">):</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">add_callback</span><span class="p">(</span><span class="n">AgentInitializedEvent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_agent_initialized</span><span class="p">)</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">add_callback</span><span class="p">(</span><span class="n">MessageAddedEvent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_message_added</span><span class="p">)</span>


<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_gateway_tools</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get tools from gateway using MCP&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">gateway_config</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">gateway_url</span> <span class="o">=</span> <span class="n">gateway_config</span><span class="p">[</span><span class="s2">&quot;gateway_url&quot;</span><span class="p">]</span>
        <span class="n">access_token</span> <span class="o">=</span> <span class="n">gateway_config</span><span class="p">[</span><span class="s2">&quot;access_token&quot;</span><span class="p">]</span>

        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Bearer </span><span class="si">{</span><span class="n">access_token</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>

        <span class="k">async</span> <span class="k">with</span> <span class="n">streamablehttp_client</span><span class="p">(</span><span class="n">gateway_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span> <span class="k">as</span> <span class="p">(</span><span class="n">read</span><span class="p">,</span> <span class="n">write</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">ClientSession</span><span class="p">(</span><span class="n">read</span><span class="p">,</span> <span class="n">write</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
                <span class="n">tools_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">session</span><span class="o">.</span><span class="n">list_tools</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">tools_result</span><span class="o">.</span><span class="n">tools</span><span class="p">)</span><span class="si">}</span><span class="s2"> tools in Gateway&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">tools_result</span><span class="o">.</span><span class="n">tools</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Gateway error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>


<span class="c1"># Create the Strands agent</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;us.anthropic.claude-3-7-sonnet-20250219-v1:0&quot;</span><span class="p">,</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="s2">&quot;You&#39;re a helpful assistant with memory and calculation abilities.&quot;</span><span class="p">,</span>
    <span class="n">hooks</span><span class="o">=</span><span class="p">[</span><span class="n">MemoryHook</span><span class="p">()]</span> <span class="k">if</span> <span class="n">MEMORY_ID</span> <span class="k">else</span> <span class="p">[],</span>
    <span class="n">state</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;session_id&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>
<span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">entrypoint</span>
<span class="k">def</span><span class="w"> </span><span class="nf">invoke</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point with gateway integration&quot;&quot;&quot;</span>
    <span class="c1"># Use the session ID from runtime</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="s1">&#39;session_id&#39;</span><span class="p">):</span>
        <span class="n">agent</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;session_id&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">.</span><span class="n">session_id</span><span class="p">)</span>

    <span class="c1"># Try to get gateway tools</span>
    <span class="n">gateway_tools</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">gateway_config</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">gateway_tools</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">get_gateway_tools</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">gateway_tools</span><span class="p">:</span>
                <span class="c1"># Update agent with gateway tools</span>
                <span class="n">agent</span><span class="o">.</span><span class="n">tools</span> <span class="o">=</span> <span class="n">gateway_tools</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error getting gateway tools: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Process the user&#39;s message</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">agent</span><span class="p">(</span><span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;prompt&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">message</span><span class="p">[</span><span class="s1">&#39;content&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;text&#39;</span><span class="p">]</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<p>Update <code>requirements.txt</code> to include MCP:</p>
<div class="highlight"><pre><span></span><code>bedrock-agentcore
strands-agents
mcp
</code></pre></div>
<h2 id="deploying-to-agentcore-runtime">Deploying to AgentCore Runtime<a class="headerlink" href="#deploying-to-agentcore-runtime" title="Permanent link">&para;</a></h2>
<p>Now, let's deploy our agent to AgentCore Runtime. Runtime provides a secure, managed environment for your agent.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Configure the agent for deployment</span>
agentcore<span class="w"> </span>configure<span class="w"> </span>-e<span class="w"> </span>agent_with_gateway.py

<span class="c1"># Deploy with short-term memory</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">MEMORY_ID</span><span class="o">=</span>&lt;your-stm-id&gt;<span class="w">  </span><span class="c1"># Use the STM ID from the setup_memory.py output</span>
agentcore<span class="w"> </span>launch
</code></pre></div>
<p>AgentCore CLI will handle:
1. Creating a container image with your agent code
2. Setting up necessary IAM roles and permissions
3. Deploying to a secure, managed runtime environment</p>
<p>After deployment completes (it may take a few minutes), you'll see output with your agent's ARN and endpoint details.</p>
<h2 id="testing-your-agent">Testing Your Agent<a class="headerlink" href="#testing-your-agent" title="Permanent link">&para;</a></h2>
<p>Now let's test our agent's memory and gateway capabilities!</p>
<h3 id="testing-short-term-memory">Testing Short-Term Memory<a class="headerlink" href="#testing-short-term-memory" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># First interaction - tell agent your name</span>
agentcore<span class="w"> </span>invoke<span class="w"> </span><span class="s1">&#39;{&quot;prompt&quot;: &quot;My name is Bob&quot;}&#39;</span>

<span class="c1"># Second interaction - see if agent remembers</span>
agentcore<span class="w"> </span>invoke<span class="w"> </span><span class="s1">&#39;{&quot;prompt&quot;: &quot;What is my name?&quot;}&#39;</span>
</code></pre></div>
<p>You should see the agent respond with "Your name is Bob" in the second interaction, demonstrating short-term memory within the session.</p>
<h3 id="testing-gateway-calculator">Testing Gateway Calculator<a class="headerlink" href="#testing-gateway-calculator" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Test calculator functionality</span>
agentcore<span class="w"> </span>invoke<span class="w"> </span><span class="s1">&#39;{&quot;prompt&quot;: &quot;Calculate 25 multiplied by 18&quot;}&#39;</span>

<span class="c1"># Try addition</span>
agentcore<span class="w"> </span>invoke<span class="w"> </span><span class="s1">&#39;{&quot;prompt&quot;: &quot;What is 42 + 28?&quot;}&#39;</span>
</code></pre></div>
<p>The agent should use the gateway calculator tool to perform these calculations and return the correct results.</p>
<h3 id="testing-long-term-memory">Testing Long-Term Memory<a class="headerlink" href="#testing-long-term-memory" title="Permanent link">&para;</a></h3>
<p>Now, let's deploy with long-term memory and test cross-session memory:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Update deployment with long-term memory</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">MEMORY_ID</span><span class="o">=</span>&lt;your-ltm-id&gt;<span class="w">  </span><span class="c1"># Use the LTM ID from setup_memory.py output</span>
agentcore<span class="w"> </span>launch

<span class="c1"># Tell agent your preferences in one session</span>
<span class="nv">SESSION1</span><span class="o">=</span><span class="s2">&quot;first-session-12345678901234567890123456&quot;</span>
agentcore<span class="w"> </span>invoke<span class="w"> </span><span class="s1">&#39;{&quot;prompt&quot;: &quot;I prefer Python and short answers&quot;}&#39;</span><span class="w"> </span>--session-id<span class="w"> </span><span class="nv">$SESSION1</span>

<span class="c1"># Wait for extraction (async process)</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Waiting 10 seconds for LTM extraction...&quot;</span>
sleep<span class="w"> </span><span class="m">10</span>

<span class="c1"># Different session still remembers!</span>
<span class="nv">SESSION2</span><span class="o">=</span><span class="s2">&quot;second-session-98765432109876543210987654&quot;</span>
agentcore<span class="w"> </span>invoke<span class="w"> </span><span class="s1">&#39;{&quot;prompt&quot;: &quot;What are my preferences?&quot;}&#39;</span><span class="w"> </span>--session-id<span class="w"> </span><span class="nv">$SESSION2</span>
</code></pre></div>
<p>Even though you're using a completely different session, the agent should remember that you prefer Python and short answers, demonstrating long-term memory extraction and recall.</p>
<h2 id="whats-happening-behind-the-scenes">What's Happening Behind the Scenes?<a class="headerlink" href="#whats-happening-behind-the-scenes" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p><strong>Short-Term Memory</strong>: The <code>MemoryHook</code> class automatically saves each message to AgentCore Memory and loads recent conversation turns when the agent starts.</p>
</li>
<li>
<p><strong>Long-Term Memory</strong>: The memory strategies you created automatically extract user preferences and facts from conversations. These extracted memories persist across different sessions.</p>
</li>
<li>
<p><strong>Gateway</strong>: The agent connects to the gateway you created and discovers the calculator tool using the MCP (Model Context Protocol). When you ask calculation questions, the agent invokes this tool to get accurate results.</p>
</li>
<li>
<p><strong>Runtime</strong>: AgentCore Runtime provides a secure, isolated environment for your agent with automatic scaling and session management.</p>
</li>
</ol>
<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>Congratulations! In just 15 minutes, you've built and deployed a production-ready AI agent with:</p>
<ul>
<li><strong>Memory capabilities</strong> that persist both within and across sessions</li>
<li><strong>Tool access</strong> through Gateway for accurate calculations</li>
<li><strong>Secure runtime deployment</strong> for production use</li>
</ul>
<p>This foundation can be extended with additional tools, more sophisticated memory strategies, and integration with other AWS services to build powerful, context-aware AI applications.</p>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h2>
<ul>
<li>Add more tools to your gateway (e.g., weather API, database access)</li>
<li>Implement more complex memory strategies</li>
<li>Build a web interface for your agent using API Gateway and Lambda</li>
<li>Explore AgentCore Browser for web browsing capabilities</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.select", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top", "search.highlight", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../assets/external/unpkg.com/mermaid@11/dist/mermaid.min.js"></script>
      
    
  </body>
</html>